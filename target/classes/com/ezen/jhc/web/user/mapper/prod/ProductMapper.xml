<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ezen.jhc.web.user.mapper.prod.ProductMapper">

	<select id="getProdColorsByNum" resultType="com.ezen.jhc.web.user.dto.prod.ProdColorDTO">
		SELECT * FROM prod_colors WHERE p_num = #{p_num}
	</select>
	
	<select id="getProdColorByNum" resultType="com.ezen.jhc.web.user.dto.prod.ProdColorDTO">
		SELECT * FROM prod_colors WHERE pc_num = #{pc_num}
	</select>
	
	<select id="getProdSizesByNum" resultType="com.ezen.jhc.web.user.dto.prod.ProdSizeDTO">
		SELECT * FROM prod_sizes WHERE p_num = #{p_num}
	</select>
	
	<select id="getProdByNum" resultType="com.ezen.jhc.web.user.dto.prod.ProdDTO">
		SELECT * FROM prods WHERE p_num = #{p_num}
	</select>
	
	<select id="getInitialColorByNum" resultType="com.ezen.jhc.web.user.dto.prod.ProdColorDTO">
		SELECT * FROM prod_colors WHERE p_num = #{p_num} AND pc_name = 'WHITE'
	</select>
	
	<select id="getProdDetailByPNum" resultType="com.ezen.jhc.web.user.dto.prod.ProductDetailDTO">
		SELECT * FROM prod_details pd WHERE pd.p_num = #{p_num} AND
		pd.pc_num = (SELECT pc.pc_num FROM prod_colors pc WHERE pc_name = '#{pc_name}' AND pc.p_num = #{p_num}) AND
		pd.ps_num = (SELECT ps.ps_num FROM prod_sizes ps WHERE ps_name = '#{ps_name}' AND ps.p_num = #{p_num})
	</select>

</mapper>